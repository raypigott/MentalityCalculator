<html>
<head>
    <style>
        .rTable {
            display: table;
            
        }
        .rTableRow { display: table-row; }
        .rTableHeading { display: table-header-group; }
        .rTableBody { display: table-row-group; }
        .rTableFoot { display: table-footer-group; }
        .rTableCell, .rTableHead { display: table-cell;
            padding: 3px 10px;
            border: 1px solid #999999;
        }

        .rTable1 {
            display: table;
            width: 50%;
            background-color: #008000
        }

        .position {
            display: block;
        }
    </style>
</head>
<body>
    <div class="rTable">
        <div class="rTableRow">
            <div class="rTableCell">Team Mentality</div>
            <div class="rTableCell">
                <select id="teamMentalitySelect"></select>
                <label id="teamMentalityLabel"></label>
            </div>
        </div>
        <div class="rTableRow">
            <div class="rTableCell">Approach Play Left</div>
            <div class="rTableCell">
                <select id="approachPlayLeftSelect"></select>
                <label id="approachPlayLeftLabel"></label>
            </div>
        </div>
        <div class="rTableRow">
            <div class="rTableCell">Approach Play Right</div>
            <div class="rTableCell">
                <select id="approachPlayRightSelect"></select>
                <label id="approachPlayRightLabel"></label>
            </div>
        </div>
        <div class="rTableRow">
            <div class="rTableCell">Focus The Play</div>
            <div class="rTableCell">
                <select id="focusPlaySelect"></select>
                <label id="focusPlayLabel"></label>
            </div>
        </div>
    </div>
    <div class="rTable1">
        <div class="rTableRow">
            <div class="rTableCell"></div>
            <div class="rTableCell"  id="tc24"></div>
            <div class="rTableCell"  id="tc23"></div>
            <div class="rTableCell"  id="tc22"></div>
            <div class="rTableCell"></div>
        </div>
        <div class="rTableRow">
            <div class="rTableCell"  id="tc21"></div>
            <div class="rTableCell" id="tc20"></div>
            <div class="rTableCell" id="tc19"></div>
            <div class="rTableCell" id="tc18"></div>
            <div class="rTableCell" id="tc17"></div>
        </div>
        <div class="rTableRow">
            <div class="rTableCell" id="tc16"></div>
            <div class="rTableCell" id="tc15"></div>
            <div class="rTableCell" id="tc14"></div>
            <div class="rTableCell" id="tc13"></div>
            <div class="rTableCell" id="tc12"></div>
        </div>
        <div class="rTableRow">
            <div class="rTableCell" id="tc11"></div>
            <div class="rTableCell" id="tc10"></div>
            <div class="rTableCell" id="tc9"></div>
            <div class="rTableCell" id="tc8"></div>
            <div class="rTableCell" id="tc7"></div>
        </div>
        <div class="rTableRow">
            <div class="rTableCell" id="tc6"></div>
            <div class="rTableCell" id="tc5"></div>
            <div class="rTableCell" id="tc4"></div>
            <div class="rTableCell" id="tc3"></div>
            <div class="rTableCell" id="tc2"></div>
        </div>
        <div class="rTableRow">
            <div class="rTableCell"></div>
            <div class="rTableCell"></div>
            <div class="rTableCell" id="tc1"></div>
            <div class="rTableCell"></div>
            <div class="rTableCell"></div>
        </div>
    </div>

<script>
    function getTeamMentality() {
        var teamMentalitySelect = document.getElementById("teamMentalitySelect");

        if (teamMentalitySelect === 'undefined') return 0;

        if (teamMentalitySelect.options.length === 0) return 0;

        return teamMentalitySelect.options[teamMentalitySelect.selectedIndex].value;
    }

    function toggle(element) {
        if (element.style.visibility === elementVisibilityCollection[0]) {
            element.style.visibility = elementVisibilityCollection[1];
        } else {
            element.style.visibility = elementVisibilityCollection[0];
        }
    }

    function myFunction() {
        var toToggle = document.getElementById("myDiv");
        this.toggle(toToggle);
    }

    function populateSelect2(dropDownName, data) {
        for (var i = 0; i < data.length; i++) {
            var opt = data[i];
            var el = document.createElement("option");
            el.textContent = opt;
            el.value = i;
            document.getElementById(dropDownName).appendChild(el);
        };
    }

    function selectElement(id, valueToSelect) {
        const element = document.getElementById(id);
        element.value = valueToSelect;
    }
     
    function getDuty(selectElement, mentality) {
        for (var i = 0; i < this.duty[mentality].length; i++) {
            var opt = this.duty[mentality][i];
            var el = document.createElement("option");
            el.textContent = opt;
            el.value = i;
            selectElement.appendChild(el);
        }
    }

    function populateSelect(id, mentality) {
        var element = document.getElementById("select" + id);
        this.getDuty(element, mentality);
    }

    function createLabel(id) {
        var positionMentalityLabel = document.createElement("label");
        var att = document.createAttribute("id");
        att.value = "positionMentality" + id;
        positionMentalityLabel.setAttributeNode(att);

        att = document.createAttribute("class");
        att.value = "position";
        positionMentalityLabel.setAttributeNode(att);

        return positionMentalityLabel;
    }

    function createEmptySelect(id) {
        var selectElement = document.createElement("select");
        var att = document.createAttribute("id");
        att.value = "select" + id;
        selectElement.setAttributeNode(att);
        return selectElement;
    }

    function createElementAndId(id, elementName) {
        var selectElement = document.createElement(elementName);
        var att = document.createAttribute("id");
        att.value = elementName + id;
        selectElement.setAttributeNode(att);
        return selectElement;
    }

    function createTextNode(positionLabel) {
        var t = document.createTextNode(positionLabel);     
        h.appendChild(t); 
    }

    function createSquare(id, positionLabel) {
        var tc = document.getElementById("tc" + id);
        var containerDiv = createElementAndId(id, "div");

        var textNode = document.createTextNode(positionLabel);
        containerDiv.appendChild(textNode);
         
        var innerDiv = this.createElementAndId(id, "div");
        innerDiv.appendChild(this.createEmptySelect(id));        
        innerDiv.appendChild(this.createLabel(id));
        containerDiv.appendChild(innerDiv); 

        tc.appendChild(containerDiv);
    }

    function createAndPopulateSelect(selectName, labelName, data) {
        var select = document.querySelector(`#${selectName}`);
        var label = document.querySelector(`#${labelName}`);

        select.addEventListener('change', function() {
            var selectedIndex = this.value;
            label.textContent = selectedIndex > 0 ? label.textContent = data[selectedIndex] : label.textContent = "";
        });
    }

    //overlap left add one to LB, ML minus one, AML minus one
    //underlap left ML minus one, AML minus one

    //focus through the middle - GK + 1, CD +1, DM + 1
    //focus play down left LB +1, WBL + 1
    
    var duty = {
        1: ['Select', 'D', 'S', 'A'],
        2: ['Select', 'D', 'Co', 'St'],
        3: ['Select', 'AM-S', 'AM-A', 'IF-S', 'IF-A'],
        4: ['Select', 'S', 'A'],
        5: ['Select', 'D', 'Co', 'St', 'S', 'A'],
    }

    var teamMentalitySelect = document.querySelector('#teamMentalitySelect');
    var teamMentalityLabel = document.querySelector('#teamMentalityLabel');
    
    teamMentalitySelect.addEventListener('change', function () {
        var selectedTeamMentalityIndex = this.value;

        console.log(selectedTeamMentalityIndex);
        
        teamMentalityLabel.textContent = teamMentality[selectedTeamMentalityIndex];

        positionMatrix.forEach((x) => {

            var positionSelect = document.querySelector('#select' + x.id);
            var positionMentalityId = document.querySelector('#positionMentality' + x.id);
            
            var positionMentalityIndex = positionSelect.options[positionSelect.selectedIndex].value;

            if (selectedTeamMentalityIndex > 0 && positionMentalityIndex > 0) {

                console.log(x[positionMentalityIndex][selectedTeamMentalityIndex]);

                var index = x[positionMentalityIndex][selectedTeamMentalityIndex];

                console.log(teamMentality[index]);

                positionMentalityId.textContent = teamMentality[index];
            }
        });
    });

    var focusPlay = [
        "Select",
        "Focus play through the middle",
        "Focus play down the left",
        "Focus play down the right",
        "Focus play down both flanks"
    ];

    var approachPlayRight = [
        "Select",
        "Overlap Right",
        "Underlap Right"
    ];

    var approachPlayLeft = [
        "Select",
        "Overlap Left",
        "Underlap Left"
    ];


    this.createAndPopulateSelect('focusPlaySelect', 'focusPlayLabel', this.focusPlay);
    this.createAndPopulateSelect('approachPlayRightSelect', 'approachPlayRightLabel', this.approachPlayRight);
    this.createAndPopulateSelect('approachPlayLeftSelect', 'approachPlayLeftLabel', this.approachPlayLeft);

    var teamMentality = [
        "Select",
        "Very Defensive" ,
        "Defensive" ,
        "Cautious",
        "Balanced",
        "Positive",
        "Attacking",
        "Very Attacking" 
    ];

    var defCentreCo =  [0, 1, 1, 1, 2, 3, 3, 3];
    var defCentreSt =  [0, 2, 2, 2, 3, 4, 4, 4];
    var defenderAttack = [0, 4, 4, 5, 5, 6, 7, 7];
  
    var defendDuty = [0, 1, 1, 1, 2, 3, 4, 4];
    var supportDuty = [0, 3, 3, 3, 4, 5, 5, 5];
    var attackDuty = [0, 4, 4, 5, 6, 7, 7, 7];

    var insideForwardSupport = [0, 4, 4, 5, 6, 7, 7, 7];
    var insideForwardAttack = [0, 5, 5, 5, 6, 7, 7, 7];

    var strikerDefend = [0, 1, 1, 1, 2, 3, 3, 3];
    var strikerSupport = [0, 2, 2, 2, 3, 4, 4, 4];
    var strikerAttack = [0, 5, 5, 5, 6, 7, 7, 7];

    var positionMatrix = [
        { id: 1, dropDownId: '1', position: "GK", 1: defendDuty, 2: supportDuty, 3: attackDuty },
        { id: 2, dropDownId: '1', position: "DR", 1: defendDuty, 2: supportDuty, 3: defenderAttack },
        { id: 3, dropDownId: '2', position: "DCR", 1: defendDuty, 2: defCentreCo, 3: defCentreSt },
        { id: 4, dropDownId: '5', position: "DC", 1: defendDuty, 2: defCentreCo, 3: defCentreSt, 4: supportDuty, 5: defenderAttack },
        { id: 5, dropDownId: '2', position: "DCL", 1: defendDuty, 2: defCentreCo, 3: defCentreSt },
        { id: 6, dropDownId: '1', position: "DL", 1: defendDuty, 2: supportDuty, 3: defenderAttack },
        { id: 7, dropDownId: '1', position: "WBR", 1: defendDuty, 2: supportDuty, 3: defenderAttack },
        { id: 8, dropDownId: '1', position: "DMR", 1: defendDuty, 2: supportDuty, 3: attackDuty },
        { id: 9, dropDownId: '1', position: "DMC", 1: defendDuty, 2: supportDuty, 3: attackDuty },
        { id: 10, dropDownId: '1', position: "DML", 1: defendDuty, 2: supportDuty, 3: attackDuty },
        { id: 11, dropDownId: '1', position: "WBL", 1: defendDuty, 2: supportDuty, 3: defenderAttack },
        { id: 12, dropDownId: '1', position: "MR", 1: defendDuty, 2: supportDuty, 3: attackDuty },
        { id: 13, dropDownId: '1', position: "MCR", 1: defendDuty, 2: supportDuty, 3: attackDuty },
        { id: 14, dropDownId: '1', position: "MC", 1: defendDuty, 2: supportDuty, 3: attackDuty },
        { id: 15, dropDownId: '1', position: "MCL", 1: defendDuty, 2: supportDuty, 3: attackDuty },
        { id: 16, dropDownId: '1', position: "ML", 1: defendDuty, 2: supportDuty, 3: attackDuty },
        { id: 17, dropDownId: '3', position: "AMR", 1: supportDuty, 2: attackDuty, 3: insideForwardSupport, 4: insideForwardAttack},
        { id: 18, dropDownId: '4', position: "AMCR", 1: supportDuty, 2: attackDuty },
        { id: 19, dropDownId: '4', position: "AMC", 1: supportDuty, 2: attackDuty },
        { id: 20, dropDownId: '4', position: "AMCL", 1: supportDuty, 2: attackDuty },
        { id: 21, dropDownId: '3', position: "AML", 1: supportDuty, 2: attackDuty, 3: insideForwardSupport, 4: insideForwardAttack },
        { id: 22, dropDownId: '1', position: "STR", 1: strikerDefend, 2: strikerSupport, 3: strikerAttack },
        { id: 23, dropDownId: '1', position: "STC", 1: strikerDefend, 2: strikerSupport, 3: strikerAttack },
        { id: 24, dropDownId: '1', position: "STL", 1: strikerDefend, 2: strikerSupport, 3: strikerAttack }

    ];

    var elementVisibilityCollection = ["visible", "hidden"];
    
    positionMatrix.forEach((x) => {
        this.createSquare(x.id, x.position);
        this.populateSelect(x.id, x.dropDownId);


        var positionSelect = document.querySelector('#select' + x.id);
        var positionMentalityId = document.querySelector('#positionMentality' + x.id);
        //positionMentalityId.InnerHTML = "Empty";

        positionSelect.addEventListener('change', function () {

            var teamMentalitySelect = document.getElementById("teamMentalitySelect");
            
            var selectedTeamMentality = teamMentalitySelect.options[teamMentalitySelect.selectedIndex].value;

            console.log(selectedTeamMentality);

            var mentalityIndex = this.value;

            if (selectedTeamMentality > 0 && mentalityIndex > 0) {
                
                console.log(x[mentalityIndex][selectedTeamMentality]);

                var index = x[mentalityIndex][selectedTeamMentality];

                console.log(teamMentality[index]);

                positionMentalityId.textContent = teamMentality[index];
            }
        });
    }); 
    
    populateSelect2("teamMentalitySelect", this.teamMentality);
    populateSelect2("approachPlayLeftSelect", this.approachPlayLeft);
    populateSelect2("approachPlayRightSelect", this.approachPlayRight);
    populateSelect2("focusPlaySelect", this.focusPlay);


</script>
</body>
</html>
